# 使用方法

## アプリの起動

### 開発環境
```bash
python -m src.main
```

### exe版
`BackgroundRemover.exe` をダブルクリック

---

## 基本的な使い方

### 1. アプリを起動

起動すると、メインウィンドウが表示されます。

```
┌─────────────────────────────────────┐
│     動画背景除去ツール              │
│                                     │
│  使用デバイス: NVIDIA GPU (...)     │
│                                     │
│  入力ファイル: 選択されていません   │
│  出力先:       自動生成             │
│                                     │
│  [========                ] 30%     │
│                                     │
│   [ 背景を除去 ]  [ キャンセル ]    │
└─────────────────────────────────────┘
```

### 2. 入力ファイルを選択

「選択」ボタンをクリックして、背景を除去したい動画ファイルを選択します。

対応形式:
- `.mp4` - 一般的なMP4動画
- `.mov` - QuickTime形式（iPhone撮影動画含む）
- `.m4v` - iTunes動画形式

### 3. 出力先を確認（オプション）

処理完了後、「ファイルを保存」ボタンで保存先を指定できます。
デフォルトのファイル名は `[元のファイル名]_nobg.mov` です。

### 4. 処理を開始

「背景を除去」ボタンをクリックすると処理が開始されます。

- 進捗バーで処理状況が表示されます
- 処理中は「背景を除去」ボタンが無効化され、「キャンセル」ボタンが有効になります
- 処理を中断したい場合は「キャンセル」ボタンをクリック
- 完了するとダイアログが表示されます

---

## 出力ファイルについて

### 形式
- **MOV (ProRes 4444)**: アルファチャンネル（透過）付きの高品質形式
- **自動最適化**: ファイルサイズが1023MBを超える場合、解像度やfpsを自動調整
- **音声**: 入力動画に音声がある場合、自動的に出力に含まれます（AAC形式）

### 対応ソフトウェア
出力されたMOVファイルは以下のソフトウェアで開けます：

- Adobe Premiere Pro
- Adobe After Effects
- DaVinci Resolve
- Final Cut Pro
- QuickTime Player

### 使用例
1. 出力されたMOVを動画編集ソフトにインポート
2. 別の背景動画/画像の上に配置
3. 透過部分から背景が見える合成映像が完成

---

## 処理時間の目安

処理時間は環境と動画の長さによって異なります。

### 7分の動画（1080p）の場合

| 環境 | 処理時間（目安） |
|-----|-----------------|
| NVIDIA RTX 3080 | 3〜5分 |
| NVIDIA GTX 1060 | 10〜15分 |
| Apple M2 | 15〜20分 |
| CPU (Core i7) | 2〜4時間 |

### 処理速度に影響する要素
- GPU性能
- 動画の解像度
- 動画の長さ（フレーム数）

---

## 注意事項

### GPUがない場合
CPUでも処理できますが、非常に時間がかかります。アプリ起動時に警告が表示されます。

### iPhone動画について
iPhoneで撮影した動画（HEVC/H.265）も対応していますが、処理にffmpegが必要です。

### 処理中の注意
- 処理中はアプリを閉じないでください
- 一時ファイルが作成されるため、十分なディスク空き容量を確保してください
- 7分の動画で一時ファイルが数GB必要になることがあります
